{% extends "base.html" %}

{% block title %}TerraPulse - Community{% endblock %}
{% block subtitle %}Community Hub{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
    <!-- Header Section -->
    <div class="bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-6 text-white">
        <div class="flex items-center space-x-3 mb-4">
            <i data-lucide="users" class="w-8 h-8"></i>
            <div>
                <h1 class="text-2xl font-bold">Community Hub</h1>
                <p class="text-green-100">Connect with fellow farmers and agricultural experts</p>
            </div>
        </div>
        <div class="grid grid-cols-3 gap-4 mt-6">
            <div class="text-center">
                <p class="text-3xl font-bold">2,847</p>
                <p class="text-green-100 text-sm">Members</p>
            </div>
            <div class="text-center">
                <p class="text-3xl font-bold">156</p>
                <p class="text-green-100 text-sm">Groups</p>
            </div>
            <div class="text-center">
                <p class="text-3xl font-bold">94</p>
                <p class="text-green-100 text-sm">Active Today</p>
            </div>
        </div>
    </div>

    <!-- Community Discovery Section -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-gray-900">Discover Communities</h2>
            <div class="flex items-center space-x-3">
                <span class="text-sm text-gray-600">Based on your profile:</span>
                <span id="user-profile-badge" class="px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full border border-green-200"></span>
            </div>
        </div>
        
        <!-- Student Communities -->
        <div id="student-communities" class="community-section hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Agricultural Science Students</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Learn and discuss agricultural concepts, share research papers, and connect with peers</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    1,284 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="book" class="w-3 h-3 mr-1"></i>
                                    Educational
                                </span>
                            </div>
                        </div>
                        <i data-lucide="graduation-cap" class="w-8 h-8 text-blue-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors" data-community="agricultural-science-students">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Sustainable Agriculture Club</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Explore sustainable farming practices, environmental conservation, and green technologies</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    892 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="leaf" class="w-3 h-3 mr-1"></i>
                                    Sustainability
                                </span>
                            </div>
                        </div>
                        <i data-lucide="leaf" class="w-8 h-8 text-green-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors" data-community="sustainable-agriculture-club">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Future Farmers Network</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Student-led initiatives in modern agriculture, innovation projects, and career guidance</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    567 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="rocket" class="w-3 h-3 mr-1"></i>
                                    Innovation
                                </span>
                            </div>
                        </div>
                        <i data-lucide="rocket" class="w-8 h-8 text-purple-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors" data-community="future-farmers-network">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Study Groups & Tutorials</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Form study groups, share tutorials, and get help with agricultural coursework</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    743 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="book-open" class="w-3 h-3 mr-1"></i>
                                    Study Support
                                </span>
                            </div>
                        </div>
                        <i data-lucide="book-open" class="w-8 h-8 text-orange-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors" data-community="study-groups-tutorials">
                        Join Community
                    </button>
                </div>
            </div>
        </div>

        <!-- Farmer Communities -->
        <div id="farmer-communities" class="community-section hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Rice Farmers United</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Share rice cultivation tips, discuss varieties, market prices, and seasonal challenges</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    2,156 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="wheat" class="w-3 h-3 mr-1"></i>
                                    Rice
                                </span>
                            </div>
                        </div>
                        <i data-lucide="wheat" class="w-8 h-8 text-emerald-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-emerald-600 text-white text-sm font-medium rounded-lg hover:bg-emerald-700 transition-colors" data-community="rice-farmers-united">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Vegetable Growers Hub</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Vegetable farming techniques, pest control, greenhouse management, and market updates</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    1,834 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="carrot" class="w-3 h-3 mr-1"></i>
                                    Vegetables
                                </span>
                            </div>
                        </div>
                        <i data-lucide="carrot" class="w-8 h-8 text-orange-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors" data-community="vegetable-growers-hub">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Smart Farming Technology</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Discuss IoT sensors, precision agriculture, drones, and modern farming equipment</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    976 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="cpu" class="w-3 h-3 mr-1"></i>
                                    Technology
                                </span>
                            </div>
                        </div>
                        <i data-lucide="cpu" class="w-8 h-8 text-blue-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors" data-community="smart-farming-technology">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-yellow-50 to-amber-50 border border-yellow-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Market & Trade Network</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Real-time market prices, trading opportunities, supply chain discussions</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    1,543 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="trending-up" class="w-3 h-3 mr-1"></i>
                                    Trading
                                </span>
                            </div>
                        </div>
                        <i data-lucide="trending-up" class="w-8 h-8 text-yellow-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors" data-community="market-trade-network">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-teal-50 to-emerald-50 border border-teal-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Organic Farming Circle</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Organic certification, natural pest control, soil health, and sustainable practices</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    1,267 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="heart" class="w-3 h-3 mr-1"></i>
                                    Organic
                                </span>
                            </div>
                        </div>
                        <i data-lucide="heart" class="w-8 h-8 text-teal-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors" data-community="organic-farming-circle">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-red-50 to-pink-50 border border-red-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Weather & Climate Network</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Weather forecasts, climate adaptation strategies, and seasonal planning</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    2,089 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="cloud-rain" class="w-3 h-3 mr-1"></i>
                                    Weather
                                </span>
                            </div>
                        </div>
                        <i data-lucide="cloud-rain" class="w-8 h-8 text-red-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors" data-community="weather-climate-network">
                        Join Community
                    </button>
                </div>
            </div>
        </div>

        <!-- Researcher Communities -->
        <div id="researcher-communities" class="community-section hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Agricultural Research Network</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Share research findings, collaborate on projects, and discuss methodology</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    456 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="microscope" class="w-3 h-3 mr-1"></i>
                                    Research
                                </span>
                            </div>
                        </div>
                        <i data-lucide="microscope" class="w-8 h-8 text-indigo-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors" data-community="agricultural-research-network">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Data Science in Agriculture</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Machine learning, satellite data analysis, predictive modeling, and analytics</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    324 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="bar-chart" class="w-3 h-3 mr-1"></i>
                                    Data Science
                                </span>
                            </div>
                        </div>
                        <i data-lucide="bar-chart" class="w-8 h-8 text-cyan-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-cyan-600 text-white text-sm font-medium rounded-lg hover:bg-cyan-700 transition-colors" data-community="data-science-agriculture">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Climate Change Research</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Climate impact studies, adaptation strategies, and environmental research</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    267 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="thermometer" class="w-3 h-3 mr-1"></i>
                                    Climate
                                </span>
                            </div>
                        </div>
                        <i data-lucide="thermometer" class="w-8 h-8 text-emerald-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-emerald-600 text-white text-sm font-medium rounded-lg hover:bg-emerald-700 transition-colors" data-community="climate-change-research">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-violet-50 to-purple-50 border border-violet-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Biotechnology & Genetics</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Crop genetics, biotechnology applications, and molecular agriculture research</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    189 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="dna" class="w-3 h-3 mr-1"></i>
                                    Biotech
                                </span>
                            </div>
                        </div>
                        <i data-lucide="dna" class="w-8 h-8 text-violet-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-violet-600 text-white text-sm font-medium rounded-lg hover:bg-violet-700 transition-colors" data-community="biotechnology-genetics">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-orange-50 to-yellow-50 border border-orange-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Publication & Peer Review</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Academic publishing, peer review process, grant applications, and conferences</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    298 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="file-text" class="w-3 h-3 mr-1"></i>
                                    Publishing
                                </span>
                            </div>
                        </div>
                        <i data-lucide="file-text" class="w-8 h-8 text-orange-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors" data-community="publication-peer-review">
                        Join Community
                    </button>
                </div>

                <div class="bg-gradient-to-br from-pink-50 to-rose-50 border border-pink-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">International Collaboration</h3>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">Global research partnerships, cross-border studies, and international funding</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span class="flex items-center">
                                    <i data-lucide="users" class="w-3 h-3 mr-1"></i>
                                    156 members
                                </span>
                                <span class="flex items-center">
                                    <i data-lucide="globe" class="w-3 h-3 mr-1"></i>
                                    Global
                                </span>
                            </div>
                        </div>
                        <i data-lucide="globe" class="w-8 h-8 text-pink-600 flex-shrink-0"></i>
                    </div>
                    <button class="join-btn w-full px-4 py-2 bg-pink-600 text-white text-sm font-medium rounded-lg hover:bg-pink-700 transition-colors" data-community="international-collaboration">
                        Join Community
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- My Communities Section -->
    <div id="my-communities" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hidden">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">My Communities</h2>
        <div id="joined-communities-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Joined communities will be populated here -->
        </div>
    </div>

    <!-- Post Creation -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="flex items-center space-x-4 mb-6">
            <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center">
                <span class="text-white text-lg font-semibold">A</span>
            </div>
            <div class="flex-1">
                <input type="text" placeholder="Share your farming experience or ask a question..." 
                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-base placeholder-gray-500">
            </div>
        </div>
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-6">
                <button class="flex items-center space-x-2 text-gray-600 hover:text-green-600 transition-colors">
                    <i data-lucide="camera" class="w-5 h-5"></i>
                    <span class="text-sm font-medium">Photo</span>
                </button>
                <button class="flex items-center space-x-2 text-gray-600 hover:text-green-600 transition-colors">
                    <i data-lucide="map-pin" class="w-5 h-5"></i>
                    <span class="text-sm font-medium">Location</span>
                </button>
                <button class="flex items-center space-x-2 text-gray-600 hover:text-green-600 transition-colors">
                    <i data-lucide="tag" class="w-5 h-5"></i>
                    <span class="text-sm font-medium">Topic</span>
                </button>
            </div>
            <button class="px-6 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg font-medium text-sm hover:from-green-700 hover:to-blue-700 transition-all duration-200">
                Post
            </button>
        </div>
    </div>

    <!-- Activity Filter -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold text-gray-900">Community Feed</h3>
            <button class="text-sm text-green-600 font-medium hover:text-green-700 transition-colors">Filter</button>
        </div>
        <div class="flex space-x-3 overflow-x-auto pb-2">
            <button class="px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white text-sm font-medium rounded-full whitespace-nowrap">
                All Posts
            </button>
            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-full whitespace-nowrap hover:bg-gray-200 transition-colors">
                Questions
            </button>
            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-full whitespace-nowrap hover:bg-gray-200 transition-colors">
                Success Stories
            </button>
            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-full whitespace-nowrap hover:bg-gray-200 transition-colors">
                Weather Alerts
            </button>
            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-full whitespace-nowrap hover:bg-gray-200 transition-colors">
                Market Prices
            </button>
            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-full whitespace-nowrap hover:bg-gray-200 transition-colors">
                Tips & Advice
            </button>
        </div>
    </div>

    <!-- Community Posts -->
    <div class="space-y-6">
        <!-- Expert Alert Post -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex items-start space-x-4">
                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <i data-lucide="shield-check" class="w-6 h-6 text-blue-600"></i>
                </div>
                <div class="flex-1">
                    <div class="flex items-center space-x-2 mb-3">
                        <span class="font-semibold text-gray-900">Dr. Rashida Rahman</span>
                        <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full">Expert</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-gray-500">2 hours ago</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-green-600 font-medium">Agricultural Science</span>
                    </div>
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <i data-lucide="alert-triangle" class="w-5 h-5 text-yellow-600"></i>
                            <span class="text-sm font-semibold text-yellow-900">Weather Alert</span>
                        </div>
                        <p class="text-sm text-gray-700 leading-relaxed">Heavy rainfall expected in Sylhet and Chittagong divisions over the next 72 hours. Farmers should protect young seedlings and ensure proper drainage in rice fields.</p>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-red-500 transition-colors">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                                <span class="text-sm">48</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                                <span class="text-sm">12</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors">
                                <i data-lucide="share-2" class="w-4 h-4"></i>
                                <span class="text-sm">Share</span>
                            </button>
                        </div>
                        <button class="text-sm text-green-600 font-medium hover:text-green-700 transition-colors">View Details</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Story Post -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex items-start space-x-4">
                <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-white text-sm font-semibold">KA</span>
                </div>
                <div class="flex-1">
                    <div class="flex items-center space-x-2 mb-3">
                        <span class="font-semibold text-gray-900">Karim Ahmed</span>
                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full">Farmer</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-gray-500">4 hours ago</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-gray-500">Comilla</span>
                    </div>
                    <p class="text-sm text-gray-700 mb-4 leading-relaxed">
                        ðŸŽ‰ Great news! Following TerraPulse predictions and implementing drip irrigation, my potato yield increased by 35% this season! The soil moisture monitoring really helped optimize water usage.
                    </p>
                    <!-- Image placeholder -->
                    <div class="bg-gradient-to-br from-green-100 to-yellow-100 rounded-lg h-48 flex items-center justify-center mb-4">
                        <div class="text-center">
                            <i data-lucide="image" class="w-12 h-12 text-gray-400 mx-auto mb-2"></i>
                            <p class="text-sm text-gray-500">Potato field harvest photo</p>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-red-500 transition-colors">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                                <span class="text-sm">127</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                                <span class="text-sm">23</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors">
                                <i data-lucide="share-2" class="w-4 h-4"></i>
                                <span class="text-sm">Share</span>
                            </button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full">#SuccessStory</span>
                            <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full">#Potato</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Post -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex items-start space-x-4">
                <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-violet-500 rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-white text-sm font-semibold">FA</span>
                </div>
                <div class="flex-1">
                    <div class="flex items-center space-x-2 mb-3">
                        <span class="font-semibold text-gray-900">Fatima Ali</span>
                        <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full">New Farmer</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-gray-500">6 hours ago</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-gray-500">Rangpur</span>
                    </div>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <i data-lucide="help-circle" class="w-5 h-5 text-blue-600"></i>
                            <span class="text-sm font-semibold text-blue-900">Question</span>
                        </div>
                        <p class="text-sm text-gray-700 leading-relaxed">My rice plants are showing yellow leaves in some patches. Soil pH is 6.8, moisture is good. Any ideas what might be causing this? Should I be worried about the upcoming harvest?</p>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-red-500 transition-colors">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                                <span class="text-sm">8</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                                <span class="text-sm">15</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors">
                                <i data-lucide="share-2" class="w-4 h-4"></i>
                                <span class="text-sm">Share</span>
                            </button>
                        </div>
                        <button class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors">
                            Answer
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Market Price Update -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex items-start space-x-4">
                <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <i data-lucide="trending-up" class="w-6 h-6 text-orange-600"></i>
                </div>
                <div class="flex-1">
                    <div class="flex items-center space-x-2 mb-3">
                        <span class="font-semibold text-gray-900">Market Price Bot</span>
                        <span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full">Automated</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-gray-500">8 hours ago</span>
                    </div>
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center space-x-2 mb-4">
                            <i data-lucide="dollar-sign" class="w-5 h-5 text-orange-600"></i>
                            <span class="text-sm font-semibold text-orange-900">Today's Market Prices</span>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-white p-3 rounded-lg border">
                                <p class="text-xs text-gray-600 mb-1">Rice (per kg)</p>
                                <p class="text-sm font-bold text-gray-900">à§³45</p>
                                <p class="text-xs text-green-600 font-medium">+2% â†—</p>
                            </div>
                            <div class="bg-white p-3 rounded-lg border">
                                <p class="text-xs text-gray-600 mb-1">Wheat (per kg)</p>
                                <p class="text-sm font-bold text-gray-900">à§³38</p>
                                <p class="text-xs text-red-600 font-medium">-1% â†˜</p>
                            </div>
                            <div class="bg-white p-3 rounded-lg border">
                                <p class="text-xs text-gray-600 mb-1">Potato (per kg)</p>
                                <p class="text-sm font-bold text-gray-900">à§³25</p>
                                <p class="text-xs text-green-600 font-medium">+5% â†—</p>
                            </div>
                            <div class="bg-white p-3 rounded-lg border">
                                <p class="text-xs text-gray-600 mb-1">Tomato (per kg)</p>
                                <p class="text-sm font-bold text-gray-900">à§³60</p>
                                <p class="text-xs text-orange-600 font-medium">No change</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-red-500 transition-colors">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                                <span class="text-sm">34</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                                <span class="text-sm">7</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors">
                                <i data-lucide="share-2" class="w-4 h-4"></i>
                                <span class="text-sm">Share</span>
                            </button>
                        </div>
                        <span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded-full">#MarketUpdate</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Training Workshop Post -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex items-start space-x-4">
                <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <i data-lucide="calendar" class="w-6 h-6 text-indigo-600"></i>
                </div>
                <div class="flex-1">
                    <div class="flex items-center space-x-2 mb-3">
                        <span class="font-semibold text-gray-900">Agricultural Extension Office</span>
                        <span class="px-2 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded-full">Official</span>
                        <span class="text-xs text-gray-500">â€¢</span>
                        <span class="text-xs text-gray-500">12 hours ago</span>
                    </div>
                    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center space-x-2 mb-3">
                            <i data-lucide="calendar" class="w-5 h-5 text-indigo-600"></i>
                            <span class="text-sm font-semibold text-indigo-900">Training Workshop</span>
                        </div>
                        <h4 class="font-semibold text-gray-900 mb-2 text-base">Modern Rice Cultivation Techniques</h4>
                        <p class="text-sm text-gray-700 mb-3 leading-relaxed">Learn about high-yield varieties, proper fertilization, and integrated pest management.</p>
                        <div class="flex flex-wrap gap-4 text-xs text-gray-600">
                            <span class="flex items-center">
                                <i data-lucide="calendar" class="w-3 h-3 mr-1"></i>
                                October 15-16, 2025
                            </span>
                            <span class="flex items-center">
                                <i data-lucide="map-pin" class="w-3 h-3 mr-1"></i>
                                Dhaka Agricultural Training Center
                            </span>
                            <span class="flex items-center">
                                <i data-lucide="ticket" class="w-3 h-3 mr-1"></i>
                                Free Registration
                            </span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-red-500 transition-colors">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                                <span class="text-sm">56</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                                <span class="text-sm">18</span>
                            </button>
                            <button class="flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors">
                                <i data-lucide="share-2" class="w-4 h-4"></i>
                                <span class="text-sm">Share</span>
                            </button>
                        </div>
                        <button class="px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors">
                            Register
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load More -->
    <div class="text-center py-8">
        <button class="px-8 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors">
            Load More Posts
        </button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Community functionality
    const joinedCommunities = JSON.parse(localStorage.getItem('joinedCommunities') || '[]');
    const userProfile = sessionStorage.getItem('userProfile') || 'farmer'; // Default to farmer
    
    // Display user profile and communities based on profile
    function initializeCommunities() {
        const profileBadge = document.getElementById('user-profile-badge');
        const studentCommunities = document.getElementById('student-communities');
        const farmerCommunities = document.getElementById('farmer-communities');
        const researcherCommunities = document.getElementById('researcher-communities');
        
        // Hide all community sections first
        document.querySelectorAll('.community-section').forEach(section => {
            section.classList.add('hidden');
        });
        
        // Set profile badge and show relevant communities
        switch(userProfile.toLowerCase()) {
            case 'student':
                profileBadge.textContent = 'Student';
                profileBadge.className = 'px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded border';
                studentCommunities.classList.remove('hidden');
                break;
            case 'farmer':
                profileBadge.textContent = 'Farmer';
                profileBadge.className = 'px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded border';
                farmerCommunities.classList.remove('hidden');
                break;
            case 'researcher':
                profileBadge.textContent = 'Researcher';
                profileBadge.className = 'px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded border';
                researcherCommunities.classList.remove('hidden');
                break;
            default:
                profileBadge.textContent = 'Farmer';
                profileBadge.className = 'px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded border';
                farmerCommunities.classList.remove('hidden');
        }
        
        updateJoinButtonStates();
        updateMyCommunities();
    }
    
    // Update join button states based on joined communities
    function updateJoinButtonStates() {
        document.querySelectorAll('.join-btn').forEach(button => {
            const communityId = button.getAttribute('data-community');
            if (joinedCommunities.includes(communityId)) {
                button.textContent = 'Joined âœ“';
                button.classList.remove('bg-blue-600', 'bg-green-600', 'bg-orange-600', 'bg-purple-600', 
                                       'bg-yellow-600', 'bg-teal-600', 'bg-red-600', 'bg-indigo-600', 
                                       'bg-cyan-600', 'bg-emerald-600', 'bg-violet-600', 'bg-pink-600');
                button.classList.add('bg-gray-600');
                button.classList.remove('hover:bg-blue-700', 'hover:bg-green-700', 'hover:bg-orange-700', 
                                       'hover:bg-purple-700', 'hover:bg-yellow-700', 'hover:bg-teal-700', 
                                       'hover:bg-red-700', 'hover:bg-indigo-700', 'hover:bg-cyan-700', 
                                       'hover:bg-emerald-700', 'hover:bg-violet-700', 'hover:bg-pink-700');
                button.classList.add('hover:bg-gray-700');
            }
        });
    }
    
    // Handle join/leave community
    function handleCommunityJoin(communityId, button) {
        const communityCard = button.closest('.community-card');
        const communityName = communityCard.querySelector('h3').textContent;
        
        if (joinedCommunities.includes(communityId)) {
            // Leave community
            const index = joinedCommunities.indexOf(communityId);
            joinedCommunities.splice(index, 1);
            button.textContent = 'Join Community';
            
            // Restore original button styling
            const originalClasses = getOriginalButtonClasses(communityId);
            button.className = `join-btn w-full px-4 py-2 text-white text-sm font-medium rounded transition-colors ${originalClasses}`;
            
            showNotification(`Left ${communityName}`, 'info');
        } else {
            // Join community
            joinedCommunities.push(communityId);
            button.textContent = 'Joined âœ“';
            button.className = 'join-btn w-full px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded hover:bg-gray-700 transition-colors';
            
            showNotification(`Joined ${communityName}!`, 'success');
        }
        
        localStorage.setItem('joinedCommunities', JSON.stringify(joinedCommunities));
        updateMyCommunities();
    }
    
    // Get original button styling based on community type
    function getOriginalButtonClasses(communityId) {
        const colorMap = {
            'agricultural-science-students': 'bg-blue-600 hover:bg-blue-700',
            'sustainable-agriculture-club': 'bg-green-600 hover:bg-green-700',
            'future-farmers-network': 'bg-purple-600 hover:bg-purple-700',
            'study-groups-tutorials': 'bg-orange-600 hover:bg-orange-700',
            'rice-farmers-united': 'bg-green-600 hover:bg-green-700',
            'vegetable-growers-hub': 'bg-orange-600 hover:bg-orange-700',
            'smart-farming-technology': 'bg-blue-600 hover:bg-blue-700',
            'market-trade-network': 'bg-yellow-600 hover:bg-yellow-700',
            'organic-farming-circle': 'bg-teal-600 hover:bg-teal-700',
            'weather-climate-network': 'bg-red-600 hover:bg-red-700',
            'agricultural-research-network': 'bg-indigo-600 hover:bg-indigo-700',
            'data-science-agriculture': 'bg-cyan-600 hover:bg-cyan-700',
            'climate-change-research': 'bg-emerald-600 hover:bg-emerald-700',
            'biotechnology-genetics': 'bg-violet-600 hover:bg-violet-700',
            'publication-peer-review': 'bg-orange-600 hover:bg-orange-700',
            'international-collaboration': 'bg-pink-600 hover:bg-pink-700'
        };
        return colorMap[communityId] || 'bg-blue-600 hover:bg-blue-700';
    }
    
    // Update My Communities section
    function updateMyCommunities() {
        const myCommunitiesSection = document.getElementById('my-communities');
        const joinedCommunitiesList = document.getElementById('joined-communities-list');
        
        if (joinedCommunities.length === 0) {
            myCommunitiesSection.classList.add('hidden');
            return;
        }
        
        myCommunitiesSection.classList.remove('hidden');
        
        // Get community details
        const communityDetails = {
            'agricultural-science-students': { name: 'Agricultural Science Students', icon: 'ðŸŽ“', color: 'blue' },
            'sustainable-agriculture-club': { name: 'Sustainable Agriculture Club', icon: 'ðŸŒ±', color: 'green' },
            'future-farmers-network': { name: 'Future Farmers Network', icon: 'ðŸš€', color: 'purple' },
            'study-groups-tutorials': { name: 'Study Groups & Tutorials', icon: 'ðŸ“–', color: 'orange' },
            'rice-farmers-united': { name: 'Rice Farmers United', icon: 'ðŸŒ¾', color: 'green' },
            'vegetable-growers-hub': { name: 'Vegetable Growers Hub', icon: 'ðŸ¥•', color: 'orange' },
            'smart-farming-technology': { name: 'Smart Farming Technology', icon: 'ðŸ¤–', color: 'blue' },
            'market-trade-network': { name: 'Market & Trade Network', icon: 'ðŸ’°', color: 'yellow' },
            'organic-farming-circle': { name: 'Organic Farming Circle', icon: 'ðŸŒ¿', color: 'teal' },
            'weather-climate-network': { name: 'Weather & Climate Network', icon: 'ðŸŒ¤ï¸', color: 'red' },
            'agricultural-research-network': { name: 'Agricultural Research Network', icon: 'ðŸ”¬', color: 'indigo' },
            'data-science-agriculture': { name: 'Data Science in Agriculture', icon: 'ðŸ“Š', color: 'cyan' },
            'climate-change-research': { name: 'Climate Change Research', icon: 'ðŸŒ', color: 'emerald' },
            'biotechnology-genetics': { name: 'Biotechnology & Genetics', icon: 'ðŸ§¬', color: 'violet' },
            'publication-peer-review': { name: 'Publication & Peer Review', icon: 'ðŸ“„', color: 'orange' },
            'international-collaboration': { name: 'International Collaboration', icon: 'ðŸŒ', color: 'pink' }
        };
        
        const html = joinedCommunities.map(communityId => {
            const details = communityDetails[communityId];
            if (!details) return '';
            
            return `
                <div class="bg-gradient-to-r from-${details.color}-50 to-${details.color}-100 border border-${details.color}-200 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            <span class="text-2xl">${details.icon}</span>
                            <h3 class="font-semibold text-gray-900 text-sm">${details.name}</h3>
                        </div>
                        <button class="leave-btn text-gray-500 hover:text-red-500 transition-colors" data-community="${communityId}">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <p class="text-xs text-gray-600">Member since today</p>
                </div>
            `;
        }).join('');
        
        joinedCommunitiesList.innerHTML = html;
        
        // Re-initialize Lucide icons for the new content
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
        
        // Add event listeners for leave buttons
        document.querySelectorAll('.leave-btn').forEach(button => {
            button.addEventListener('click', function() {
                const communityId = this.getAttribute('data-community');
                const index = joinedCommunities.indexOf(communityId);
                if (index > -1) {
                    joinedCommunities.splice(index, 1);
                    localStorage.setItem('joinedCommunities', JSON.stringify(joinedCommunities));
                    updateJoinButtonStates();
                    updateMyCommunities();
                    showNotification('Left community', 'info');
                }
            });
        });
    }
    
    // Show notification
    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 ${
            type === 'success' ? 'bg-green-500 text-white' : 
            type === 'error' ? 'bg-red-500 text-white' : 
            'bg-blue-500 text-white'
        }`;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }
    
    // Add event listeners for join buttons
    document.querySelectorAll('.join-btn').forEach(button => {
        button.addEventListener('click', function() {
            const communityId = this.getAttribute('data-community');
            handleCommunityJoin(communityId, this);
        });
    });
    
    // Initialize communities on page load
    initializeCommunities();
});
</script>
{% endblock %}